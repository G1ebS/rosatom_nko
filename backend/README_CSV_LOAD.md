# Инструкция по загрузке данных из CSV

## Быстрый старт

1. **Примените миграции:**
   ```bash
   cd backend
   python manage.py makemigrations
   python manage.py migrate
   ```

2. **Загрузите данные из CSV:**
   ```bash
   python manage.py load_csv_data
   ```

3. **Создайте администратора:**
   ```bash
   python manage.py createsuperuser
   ```

## Что делает команда load_csv_data

### Загрузка НКО (res.csv)
- Читает файл `backend/api/res.csv`
- Формат: `Город; Категория; Название; Описание; Ссылка`
- Автоматически создает категории если их нет
- Все загруженные НКО получают статус `approved`

### Загрузка материалов (materials.csv)
- Читает файл `backend/api/materials.csv`
- Формат: `Теги; Название; Курс; Автор; Ссылка`
- Теги разделены символом `{{`
- Автоматически создает теги если их нет

## Структура данных

### НКО (res.csv)
- **Город** - город где находится НКО
- **Категория** - категория деятельности (создается автоматически)
- **Название** - название организации
- **Описание** - полное описание деятельности
- **Ссылка** - URL сайта или соцсети (может быть пустым или `-`)

### Материалы (materials.csv)
- **Теги** - теги через `{{` (например: `эко{{городская_среда{{обучение`)
- **Название** - название материала
- **Курс** - название курса
- **Автор** - автор материала
- **Ссылка** - URL на материал

## Примеры

### Пример строки из res.csv:
```
Ангарск; Местное сообщество и развитие территорий; ОО ТОС АГО "12а микрорайон"; Основная деятельность...; https://vk.com/id746471055
```

### Пример строки из materials.csv:
```
эко{{городская_среда; Концепция «Зелёный офис». С чего начать?; Зелёный офис; Ольга Шкабардня; https://vkvideo.ru/video-172285001_456239301
```

## Примечания

- Команда использует транзакции, поэтому либо все данные загружаются, либо ничего
- Дубликаты определяются по slug (для НКО) и URL (для материалов)
- Если НКО или материал уже существует, он не будет перезаписан

